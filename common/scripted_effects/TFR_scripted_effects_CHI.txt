CHI_increase_coronavirus = {
	if = {
		limit = {
			has_idea = CHI_covid_idea_1
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_1
			add_idea = CHI_covid_idea_2
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_2
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_2
			add_idea = CHI_covid_idea_3
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_3
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_3
			add_idea = CHI_covid_idea_4
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_4
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_4
			add_idea = CHI_covid_idea_5
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_5
		}
		add_stability = -0.05
	}
	else = {
		add_ideas = CHI_covid_idea_1
	}
}

CHI_decrease_coroldpirus = {
	if = {
		limit = {
			has_idea = CHI_covid_idea_1
		}
		remove_ideas = CHI_covid_idea_1
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_2
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_2
			add_idea = CHI_covid_idea_1
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_3
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_3
			add_idea = CHI_covid_idea_2
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_4
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_4
			add_idea = CHI_covid_idea_3
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_covid_idea_5
		}
		swap_ideas = {
			remove_idea = CHI_covid_idea_5
			add_idea = CHI_covid_idea_4
		}
	}
}

CHI_increase_tsmc_idea = {
	if = {
		limit = {
			has_idea = CHI_tsmc_idea
		}
		swap_ideas = {
			remove_idea = CHI_tsmc_idea
			add_idea = CHI_tsmc_1_idea
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_tsmc_1_idea
		}
		swap_ideas = {
			remove_idea = CHI_tsmc_1_idea
			add_idea = CHI_tsmc_2_idea
		}
	}
}

CHI_increase_prc_embargo_idea = {
	if = {
		limit = {
			has_idea = CHI_prc_embargo_idea
		}
		swap_ideas = {
			remove_idea = CHI_prc_embargo_idea
			add_idea = CHI_prc_embargo_idea1
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_prc_embargo_idea1
		}
		swap_ideas = {
			remove_idea = CHI_prc_embargo_idea1
			add_idea = CHI_prc_embargo_idea2
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_prc_embargo_idea2
		}
		swap_ideas = {
			remove_idea = CHI_prc_embargo_idea2
			add_idea = CHI_prc_embargo_idea3
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_prc_embargo_idea3
		}
		remove_idea = CHI_prc_embargo_idea3
	}
}

CHI_vaccine_progress = {
	add_to_variable = {
		var = CHI_vaccine_progress
		value = CHI_vaccine_progress_temp
	}

	clamp_variable = {
		var = CHI_vaccine_progress
		min = 0
		max = 100
	}
}
CHI_PRC_jinmen_calc = {
	add_to_variable = {
		var = CHI_PRC_jinmen_calc
		value = CHI_PRC_jinmen_calc_temp
	}

	clamp_variable = {
		var = CHI_PRC_jinmen_calc
		min = 0
		max = 100
	}
}
PRC_PRC_jinmen_calc = {
	add_to_variable = {
		var = PRC_PRC_jinmen_calc
		value = PRC_PRC_jinmen_calc_temp
	}

	clamp_variable = {
		var = PRC_PRC_jinmen_calc
		min = 0
		max = 100
	}
}

CHI_vaccine_value = {
	custom_effect_tooltip = CHI_vaccine_value_change_tooltip
	add_to_variable = {
		var = CHI_vaccine_value
		value = CHI_vaccine_value_temp
	}
}

PRC_Infiltration_change = {
	custom_effect_tooltip = PRC_Infiltration_change_tooltip
	add_to_variable = {
		var = CHI_PRC_Infiltration_progress
		value = CHI_PRC_Infiltration_progress_temp
	}

	clamp_variable = {
		var = CHI_PRC_Infiltration_progress
		min = 0
		max = 100
	}
	
	divide_variable = {
			var = CHI_PRC_Infiltration_progress_temp
			value = -1000       # 正數
	}
	
	# 複製到臨時變數
	set_variable = {
			var = number
			value = CHI_PRC_Infiltration_progress_temp
	}
	
	# 累加到 buff
	add_to_variable = {
		var = CHI_PRC_Infiltration_buff
		value = number
	}
	clamp_variable = {
		var = CHI_PRC_Infiltration_buff
		min = -0.1
		max = 0
	}
}
CHI_oli_crash_idea = {
	if = {
		limit = {has_idea = CHI_oil_crash1}
		swap_ideas = {
			remove_idea = CHI_oil_crash1
			add_idea = CHI_oil_crash2
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash2
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash2
			add_idea = CHI_oil_crash3
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash3
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash3
			add_idea = CHI_oil_crash4
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash4
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash4
			add_idea = CHI_oil_crash5
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash5
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash5
			add_idea = CHI_oil_crash6
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash6
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash6
			add_idea = CHI_oil_crash7
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash7
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash7
			add_idea = CHI_oil_crash8
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash8
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash8
			add_idea = CHI_oil_crash9
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash9
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash9
			add_idea = CHI_oil_crash10
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash10
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash10
			add_idea = CHI_oil_crash11
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash11
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash11
			add_idea = CHI_oil_crash12
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash12
		}
		swap_ideas = {
			remove_idea = CHI_oil_crash12
			add_idea = CHI_oil_crash13
		}
	}
	else_if = {
		limit = {
			has_idea = CHI_oil_crash13
		}
			remove_idea = CHI_oil_crash13
	}
	else = {
		add_ideas = CHI_oil_crash1
	}
}
PRC_the_separatist_problem_ideas = {
	if = {
		limit = {has_idea = PRC_the_separatist_problem}
		swap_ideas = {
			remove_idea = PRC_the_separatist_problem
			add_idea = PRC_the_separatist_problem_2
		}
	}
	else_if = {
		limit = {
			has_idea = PRC_the_separatist_problem_2
		}
		swap_ideas = {
			remove_idea = PRC_the_separatist_problem_2
			add_idea = PRC_the_separatist_problem_3
		}
	}
	else_if = {
		limit = {
			has_idea = PRC_the_separatist_problem_3
		}
		swap_ideas = {
			remove_idea = PRC_the_separatist_problem_3
			add_idea = PRC_the_separatist_problem_4
		}
	}
	else_if = {
		limit = {
			has_idea = PRC_the_separatist_problem_4
		}
			remove_idea = PRC_the_separatist_problem_4
	}
	else = {
		add_ideas = PRC_the_separatist_problem
	}
}
