on_actions = {
	on_state_control_changed = {
		effect = {
			if = { 
				limit = {
					has_global_flag = PRC_ongoing_taiwan_war
					FROM.FROM = { 
						OR = {
							state = 1148
						} 
					}
					FROM = {
						OR = {
						is_ally_with = CHI
						}
					}
					ROOT = {
						OR = {
						is_ally_with = PRC
						}
					}
					not = { has_global_flag = battle_of_taipei }
				}
				set_global_flag = battle_of_taipei
				news_event = {
					id = china.72
					hours = 6
				}
				1148 = {
					add_extra_state_shared_building_slots = -2
					add_manpower = -10213
					damage_building = {
						type = infrastructure
						damage = 2
					}
					damage_building = {
						type = arms_factory
						damage = 2
					}
					damage_building = {
						type = industrial_complex
						damage = 2
					}
					damage_building = {
						type = dockyard
						damage = 2
					}
				}
				PRC = {
					country_event = {
						id = ROC.46 
						}
					add_days_mission_timeout = {
						mission = PRC_taiwan_war_countdown
						days = 15
					}
				}
				JAP = {
					country_event = {
						id = ROC.50
						}
					add_days_mission_timeout = {
						mission = JAP_taiwan_war_mission
						days = 15
					}
				}
				CHI = {
					country_event = {
						id = ROC.50
						}
					add_days_mission_timeout = {
						mission = CHI_taiwan_war_mission
						days = 15
					}
				}
			}
			if = { 
				limit = {
					has_global_flag = PRC_ongoing_taiwan_war
					FROM.FROM = { 
						OR = {
							state = 1149
						} 
					}
					FROM = {
						OR = {
						is_ally_with = CHI
						}
					}
					ROOT = {
						OR = {
						is_ally_with = PRC
						}
					}
					not = { has_global_flag = battle_of_taizhong }
				}
				set_global_flag = battle_of_taizhong
				1149 = {
					add_extra_state_shared_building_slots = -2
					add_manpower = -7492
					damage_building = {
						type = infrastructure
						damage = 2
					}
					damage_building = {
						type = arms_factory
						damage = 2
					}
					damage_building = {
						type = industrial_complex
						damage = 2
					}
					damage_building = {
						type = dockyard
						damage = 2
					}
				}
				PRC = {
					country_event = {
						id = ROC.47
						}
					add_days_mission_timeout = {
						mission = PRC_taiwan_war_countdown
						days = 15
					}
				}
				JAP = {
					country_event = {
						id = ROC.51
						}
					add_days_mission_timeout = {
						mission = JAP_taiwan_war_mission
						days = 15
					}
				}
				CHI = {
					country_event = {
						id = ROC.51
						}
					add_days_mission_timeout = {
						mission = CHI_taiwan_war_mission
						days = 15
					}
				}
			}
			if = { 
				limit = {
					has_global_flag = PRC_ongoing_taiwan_war
					FROM.FROM = { 
						OR = {
							state = 1148
						} 
					}
					FROM = {
						OR = {
						is_ally_with = CHI
						}
					}
					ROOT = {
						OR = {
						is_ally_with = PRC
						}
					}
					not = { has_global_flag = battle_of_gaoxiong }
				}
				set_global_flag = battle_of_gaoxiong
				1148 = {
					add_extra_state_shared_building_slots = -2
					add_manpower = -7316
					damage_building = {
						type = infrastructure
						damage = 2
					}
					damage_building = {
						type = arms_factory
						damage = 2
					}
					damage_building = {
						type = industrial_complex
						damage = 2
					}
					damage_building = {
						type = dockyard
						damage = 2
					}
				}
				PRC = {
					country_event = {
						id = ROC.48
						}
					add_days_mission_timeout = {
						mission = PRC_taiwan_war_countdown
						days = 15
					}
				}
				JAP = {
					country_event = {
						id = ROC.52
						}
					add_days_mission_timeout = {
						mission = JAP_taiwan_war_mission
						days = 15
					}
				}
				CHI = {
					country_event = {
						id = ROC.52
						}
					add_days_mission_timeout = {
						mission = CHI_taiwan_war_mission
						days = 15
					}
				}
			}
			if = { 
				limit = {
					has_global_flag = PRC_ongoing_taiwan_war
					FROM.FROM = { 
						OR = {
							state = 524
						} 
					}
					FROM = {
						OR = {
						is_ally_with = CHI
						}
					}
					ROOT = {
						OR = {
						is_ally_with = PRC
						}
					}
					not = { has_global_flag = battle_of_hualian }
				}
				set_global_flag = battle_of_hualian
				524 = {
					add_extra_state_shared_building_slots = -2
					add_manpower = -4362
					damage_building = {
						type = infrastructure
						damage = 2
					}
					damage_building = {
						type = arms_factory
						damage = 2
					}
					damage_building = {
						type = industrial_complex
						damage = 2
					}
					damage_building = {
						type = dockyard
						damage = 2
					}
				}
				PRC = {
					country_event = {
						id = ROC.49
						}
					add_days_mission_timeout = {
						mission = PRC_taiwan_war_countdown
						days = 15
					}
				}
				JAP = {
					country_event = {
						id = ROC.53
						}
					add_days_mission_timeout = {
						mission = JAP_taiwan_war_mission
						days = 15
					}
				}
				CHI = {
					country_event = {
						id = ROC.53
						}
					add_days_mission_timeout = {
						mission = CHI_taiwan_war_mission
						days = 15
					}
				}
			}
		}
	}
}
